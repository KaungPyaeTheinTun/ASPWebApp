@model ASPWebApp.ViewModels.TechnologyViewModel
@{
    Layout = "_AdminLayout";
    ViewData["Title"] = "Create Technology";
}

<style>

    .create-wrapper {
        min-height: 100vh;
        display: flex;
        align-items: flex-start;
        justify-content: center;
        padding: 3rem 1rem;
    }

    .create-card {
        background: #fff;
        width: 100%;
        max-width: 680px;
        border: 1px solid #e5e5e5;
        border-radius: 1.25rem;
        overflow: hidden;
        box-shadow: 0 2px 24px rgba(0,0,0,0.06);
    }

    .create-body {
        padding: 2.5rem;
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-group label {
        display: block;
        font-size: 0.88rem;
        font-weight: 600;
        letter-spacing: 0.07em;
        text-transform: uppercase;
        color: #111;
        margin-bottom: 0.5rem;
    }

    .form-group input[type="text"],
    .form-group textarea,
    .form-group select {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 1.5px solid #e5e5e5;
        border-radius: 0.625rem;
        font-size: 0.9rem;
        color: #111;
        background: #fafafa;
        transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
        outline: none;
        box-sizing: border-box;
    }

    .form-group input[type="text"]:focus,
    .form-group textarea:focus,
    .form-group select:focus {
        border-color: #2563eb;
        background: #fff;
        box-shadow: 0 0 0 3px rgba(37,99,235,0.08);
    }

    .form-group textarea {
        resize: vertical;
        min-height: 120px;
    }

    .form-group select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%239ca3af' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 1rem center;
        padding-right: 2.5rem;
        cursor: pointer;
    }

    /* ── Side by side row ── */
    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    .form-row .form-group {
        margin-bottom: 0;
    }

    /* ── Compact file input ── */
    .file-input-wrapper {
        position: relative;
    }

    .file-input-wrapper input[type="file"] {
        width: 100%;
        padding: 0.65rem 1rem;
        border: 1.5px solid #e5e5e5;
        border-radius: 0.625rem;
        font-size: 0.92rem;
        color: #6b7280;
        background: #fafafa;
        cursor: pointer;
        box-sizing: border-box;
        transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
        outline: none;
    }

    .file-input-wrapper input[type="file"]:focus {
        border-color: #2563eb;
        background: #fff;
        box-shadow: 0 0 0 3px rgba(37,99,235,0.08);
    }

    .file-input-wrapper input[type="file"]::file-selector-button {
        background: #111;
        color: #fff;
        border: none;
        border-radius: 0.375rem;
        padding: 0.3rem 0.75rem;
        font-size: 0.75rem;
        font-weight: 600;
        cursor: pointer;
        margin-right: 0.75rem;
        transition: background 0.15s;
    }

    .file-input-wrapper input[type="file"]::file-selector-button:hover {
        background: #2563eb;
    }

    /* ── Image preview ── */
    .image-preview-wrapper {
        display: none;
        margin-top: 1rem;
        border-radius: 0.625rem;
        overflow: hidden;
        border: 1.5px solid #e5e5e5;
        position: relative;
    }

    .image-preview-wrapper img {
        width: 100%;
        max-height: 220px;
        object-fit: cover;
        display: block;
    }

    .image-preview-wrapper .preview-badge {
        position: absolute;
        top: 0.6rem;
        left: 0.6rem;
        background: #111;
        color: #fff;
        font-size: 0.9rem;
        padding: 0.2rem 0.5rem;
        border-radius: 0.3rem;
        letter-spacing: 0.05em;
    }

    .image-preview-wrapper .remove-btn {
        position: absolute;
        top: 0.6rem;
        right: 0.6rem;
        background: #fff;
        border: 1.5px solid #e5e5e5;
        border-radius: 50%;
        width: 1.8rem;
        height: 1.8rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background 0.15s;
    }

    .image-preview-wrapper .remove-btn:hover {
        background: #fee2e2;
        border-color: #fca5a5;
    }

    .image-preview-wrapper .remove-btn i {
        color: #374151;
        font-size: 0.95rem;
    }

    /* ── Divider ── */
    .form-divider {
        border: none;
        border-top: 1px solid #f3f4f6;
        margin: 2rem 0;
    }

    /* ── Actions ── */
    .form-actions {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 0.75rem;
    }

    .btn-cancel {
        padding: 0.7rem 1.4rem;
        border: 1.5px solid #e5e5e5;
        border-radius: 0.625rem;
        background: #fff;
        color: #374151;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        text-decoration: none;
        transition: background 0.15s, border-color 0.15s;
    }

    .btn-cancel:hover {
        background: #f9fafb;
        border-color: #d1d5db;
        color: #111;
    }

    .btn-save {
        padding: 0.7rem 1.6rem;
        background: #2563eb;
        border: none;
        border-radius: 0.625rem;
        color: #fff;
        font-size: 0.875rem;
        font-weight: 600;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        transition: background 0.15s, transform 0.1s, box-shadow 0.15s;
    }

    .btn-save:hover {
        background: #1d4ed8;
        transform: translateY(-1px);
    }

    .btn-save:active {
        transform: translateY(0);
    }
</style>

<div class="create-wrapper">
    <div class="create-card">
        <div class="create-body">
            <form method="post" enctype="multipart/form-data">

                <div class="form-group">
                    <label>Name</label>
                    <input type="text" name="Name" placeholder="e.g. React, PostgreSQL, Docker…" />
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <textarea name="Description" placeholder="Brief description of the technology…"></textarea>
                </div>

                <div class="form-group">
                    <label>URL</label>
                    <input asp-for="Url" placeholder="URL link of the technology…" class="form-control" />
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Category</label>
                        <select name="Category">
                            <option value="" disabled selected>Select a category</option>
                            <option value="Frontend">Frontend</option>
                            <option value="Backend">Backend</option>
                            <option value="Framework">Framework</option>
                            <option value="Container">Container</option>
                            <option value="Server">Server</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Image</label>
                        <div class="file-input-wrapper">
                            <input type="file" name="ImageFile" id="imageInput" accept="image/*" />
                        </div>
                    </div>
                </div>

                <div class="image-preview-wrapper" id="previewWrapper">
                    <img id="previewImg" src="#" alt="Preview" />
                    <span class="preview-badge">PREVIEW</span>
                    <button type="button" class="remove-btn" id="removeBtn">
                        <i class="bi bi-x"></i>
                    </button>
                </div>

                <hr class="form-divider" />

                <div class="form-actions">
                    <a href="@Url.Action("Index")" class="btn-cancel">Cancel</a>
                    <button type="submit" class="btn-save">
                        <i class="bi bi-check2"></i> Save Technology
                    </button>
                </div>

            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        const input = document.getElementById('imageInput');
        const previewWrapper = document.getElementById('previewWrapper');
        const previewImg = document.getElementById('previewImg');
        const removeBtn = document.getElementById('removeBtn');

        input.addEventListener('change', function () {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = e => {
                    previewImg.src = e.target.result;
                    previewWrapper.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });

        removeBtn.addEventListener('click', function () {
            input.value = '';
            previewImg.src = '#';
            previewWrapper.style.display = 'none';
        });
    </script>
}